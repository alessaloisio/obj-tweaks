!function(e,t){for(var i in t)e[i]=t[i]}(exports,function(e){var t={};function i(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,i),o.l=!0,o.exports}return i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)i.d(n,o,function(t){return e[t]}.bind(null,o));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=0)}([function(e,t,i){"use strict";i.r(t);const n=e=>{if("object"==typeof e)for(let t=0;t<Object.keys(e).length;t++){const i=Object.keys(e)[t];e[i]&&"object"==typeof e[i]&&n(e[i]);const o=i.indexOf(".");if(o>0){const n=i.substring(0,o);e[n]={...e[n],[i.substring(o+1)]:e[i]},delete e[i],t-=1}}return e},o=(e,t="$exist")=>("string"==typeof e&&(e={[e]:t}),n(e));class r{constructor(e){this.obj=e,this.searchState={depth:0,validation:{position:0,status:!1,findPath:[]}},this.updated=!1}find(e){return this.findRecursive(this.obj,n(e))}findRecursive(e,t,i=[],n={...this.searchState}){return Object.keys(e).map(o=>{if(t[o]&&"$"===t[o][0])switch(t[o]){case"$exist":case"$get":i.push(e[o]),delete t[o]}if(!n.validation.position&&t[o]&&(n.validation.position=n.depth,n.validation.status=!0),e[o]&&"object"==typeof e[o]){let r=t[o]?{...t[o]}:{...t};this.findRecursive(e[o],r,i,{...n,depth:n.depth+1,validation:{...n.validation,findPath:[...n.validation.findPath,o]}}),n.depth>=n.validation.position&&(Object.keys(r).length||delete t[o])}else e[o]===t[o]&&(n.validation.position||(n.validation.position=n.depth,n.validation.status=!0),delete t[o]);return!0}),n.validation.status&&n.depth===n.validation.position&&(Object.keys(t).length||(e.constructor._v_path=n.validation.findPath,i.push(e)),n.validation.position=0,n.validation.status=!1),i}merge(e){if(e instanceof Array){return e.map(e=>this.mergeRecursive(this.obj,n(e)))}return this.mergeRecursive(this.obj,n(e))}mergeRecursive(e,t,i={...this.searchState}){return Object.keys(e).map(n=>(e[n]&&"object"==typeof e[n]?(t[n]&&(i={...i,validation:{...i.validation,position:i.depth,status:!0}}),this.mergeRecursive(e[n],t[n]?t[n]:JSON.parse(JSON.stringify(t)),{...i,depth:i.depth+1}),t[n]&&(Object.keys(t[n]).length&&Object.keys(t[n]).map(i=>e[n][i]=t[n][i]),delete t[n]),Object.keys(t).length&&i.depth===i.validation.position&&(!i.validation.status&&this.updated||(Object.keys(t).map(i=>(e instanceof Array?void 0===e[n][i]&&(e[n][i]=t[i]):void 0===e[i]&&(e[i]=t[i]),!0)),this.updated=!0))):void 0!==t[n]&&(t[n]!==e[n]&&(e[n]=t[n]),delete t[n]),!0)),e}add(e,t){return this.obj.update(o(e,"$exist"),t)}delete(e){return this.obj.find(e).map(e=>{const t=e.constructor._v_path,i=t.pop(),n=this.goto(t);return n[i]&&delete n[i],{[i]:e}})}swap(e,t){const i=this.delete(e);this.obj.add(t,i)}goto(e,t=this.obj){if(e.length){const i=e.reverse().pop();t[i]&&(t=this.goto(e,t[i]))}return t}}r.newObj=!1;["new","update","find","add","merge","exist","delete","swap"].map(e=>(Object.prototype[e]=function(...t){let i;i="boolean"==typeof t[t.length-1]?t.pop():"new"===e||r.newObj;const n=i?JSON.parse(JSON.stringify(this)):this,o=new r(n);let s,a,d;switch(e){case"update":[s,a]=t,o.find(s).merge(a);break;case"add":[d,a]=t,o.add(d,a);break;case"find":return[s]=t,o.find(s);case"merge":return[a]=t,o.merge(a);case"exist":return[a]=t,!!o.find({[a]:"$exist"}).length;case"delete":[s]=t,o.delete(s);break;case"swap":[s,d]=t,o.swap(s,d)}return o.obj},!0)),i.d(t,"remapKeys",(function(){return n})),i.d(t,"addOnRemapKey",(function(){return o}));t.default=r}]));